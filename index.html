<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Motivational Quotes - 励志名言</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/htmx.org@2.0.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
</head>
<body>
  <header></header>
  <main>
    <div class="quotation"></div><div class="quotation qtwo"></div>
    <h3 id="quotation_text"></h3>
    <div class="breakline"></div>
    <h5 id="quotation_linetwo"></h5>
    <div id="author"></div>
    <div id="signature" class="author"></div>
  </main>
  <footer>
    <div id="copyright" class="center"></div>
    <div class="pager"><a id="prev" class="prev"></a><a id="next" class="next"></a></div>
  </footer>
  <script>
    let data,counter=0,maxlength=0;
    // JavaScript fetch example
    document.addEventListener('DOMContentLoaded', function() {
      fetchJson();
      const prev = document.getElementById('prev');
      prev.addEventListener('click', showQuote);
      const next = document.getElementById('next');
      next.addEventListener('click', showQuote);
    });
    async function fetchJson() {
        const response = await fetch('/quotes1.json');
        data = await response.json();
        maxlength = data["data"] ? data["data"].length : 0;
        cc = data["copyright"] ? data["copyright"] : "&copy; 2024";
        document.getElementById('copyright').innerHTML = cc;
        if(maxlength>0)
        nextQuote(_.random(0, maxlength-1))
    }

    const nextQuote = (now) => {
      let nowQ = data["data"][now];
      if(nowQ){
        document.getElementById('quotation_text').textContent = nowQ.quote;
        document.getElementById('quotation_linetwo').textContent = nowQ.line_two ?? "";
        document.getElementById('author').textContent = nowQ.author;
        document.getElementById('signature').style.display = nowQ.show_signature ? "block" : "none";
      }
    }

    const showQuote = ()=>{
      counter++;
      if(counter==maxlength)counter=0;
      nextQuote(counter);
    }
</script>
</body>
</html>